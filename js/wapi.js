let $currentState="unknown",isInjected=!1,isReady=!1;const $getDebug=()=>(self||window).require("__debug");let webpackRequire;const fallbackModules={};function injectLoader(){if(isInjected)return;const e=self||window,t=setInterval((async()=>{"unknown"===$currentState?!e.require||!e.__d||($currentState="meta",webpackRequire=function(t){try{return e.ErrorGuard.skipGuardGlobal(!0),e.importNamespace(t)}catch(e){return null}},Object.defineProperty(webpackRequire,"m",{get:()=>{var e;const t=(self||window).require("__debug").modulesMap,n=Object.keys(t).filter((e=>/^(?:use)?WA/.test(e))),a={};for(const i of n)a[i]=null==(e=t[i])?void 0:e.factory;return a}}),isInjected=!0,await new Promise((e=>setTimeout(e,1e3))),isReady=!0,window.apiLeadbet=await assembleAPI(),window.wppForceMainLoad&&await new Promise((e=>setTimeout(e,5e3)))):clearInterval(t)}),1e3),n="webpackChunkwhatsapp_web_client",a=e[n]||[];typeof e[n]>"u"?e[n]=a:$currentState="webpack";const i=Date.now();a.push([[i],{},e=>{webpackRequire=e,queueMicrotask((()=>(async e=>{webpackRequire=e,$currentState="webpack",isInjected=!0,await new Promise((e=>setTimeout(e,500)));const t=new Array(1e4).fill(1).map(((e,t)=>e+t)).filter((e=>{const t=webpackRequire.u(e);return t.includes("locales")?navigator.languages.some((e=>t.includes(`locales/${e}`))):!t.includes("undefined")})),n=t.filter((e=>{const t=webpackRequire.u(e);return t.includes("main")&&!t.includes("locales")}));for(const e of n)try{await webpackRequire.e(e)}catch{}isReady=!0,window.apiLeadbet=await assembleAPI(),window.wppForceMainLoad&&await new Promise((e=>setTimeout(e,5e3)));for(const e of t)try{await webpackRequire.e(e)}catch{}})(e)))}])}injectLoader();const sourceModuleMap=new Map;function moduleSource(e){if("webpack"!==$currentState||!webpackRequire.m[e])return"";if(sourceModuleMap.has(e))return sourceModuleMap.get(e);const t=webpackRequire.m[e].toString();return sourceModuleMap.set(e,t),t}const pureComponentMap=new Map;function isReactComponent(e){if(pureComponentMap.has(e))return pureComponentMap.get(e);const t=moduleSource(e),n=/\w+\.(Pure)?Component\s*\{/.test(t);return pureComponentMap.set(e,n),n}function searchId(e,t=!1){let n=Object.keys(webpackRequire.m);t&&(n=n.reverse());for(const t of n)if(!isReactComponent(t))try{if(e(webpackRequire(t),t))return t}catch{continue}n=Object.keys(fallbackModules);for(const t of n)try{if(e(fallbackModules[t],t))return t}catch{continue}return null}function loadModule(e){return/^fallback_/.test(e)?fallbackModules[e]:webpackRequire(e)}var apiLeadbet={};async function assembleAPI(){if(isInjected&&isReady)try{return apiLeadbet=requiredModules.reduce(((e,t)=>{const n=searchId(t.conditions);if(!n)return e;const a=loadModule(n),i=t.properties?t.properties(a):t.conditions(a);return i&&("Store"===t.id?e.wapi={...e.wapi,...i}:e.wapi[t.id]=i),e}),{wapi:{}}).wapi}catch(e){console.log(e)}}const checkApiLeadbet=setInterval((()=>{apiLeadbet&&Object.keys(apiLeadbet).length>0&&(clearInterval(checkApiLeadbet),initialize())}),1e3);var labelList={},triggerList=[];async function initialize(){await startWpp(),startWapiMonitors()}async function startWpp(){try{const e=await getUserWPP();if(!e)throw new Error("wpp_wapi_error_obj");window.dispatchEvent(new CustomEvent("STARTED_WAPI",{detail:e}))}catch(e){console.error(e.message||"wpp_wapi_error")}}async function getUserWPP(){for(const e of apiLeadbet.Chat._models)for(const t of e.msgs._models)if(e.__x_isUser&&t.__x_id.fromMe)return t.__x_from.user;return null}let messageListener=null;function wppTriggersMessageListeners(e){triggerList=[],triggerList=e?.triggerList||[],messageListener&&(apiLeadbet.Msg.off("add",messageListener),messageListener=null),messageListener=e=>{handleTrigger(e)},apiLeadbet.Msg.on("add",messageListener)}function startWapiMonitors(){setInterval((()=>{getOpenChat(),getLabels()}),1e3)}async function handleCheckAPI(){let e=!1,t=null;for(let n=0;n<apiLeadbet.Chat._models.length&&!e;n++)for(let a=0;a<apiLeadbet.Chat._models[n].msgs._models.length&&!e;a++){if(apiLeadbet.Chat._models[n].__x_isUser){apiLeadbet.Chat._models[n].msgs._models[a].__x_isSentByMe&&(e=!0,t=apiLeadbet.Chat._models[n].msgs._models[a].__x_from)}}window.dispatchEvent(new CustomEvent("API_MOUNTED",{detail:t}))}async function handleSendState(e,t){const n=t.id;let a=new Date,i=e.duration,o=a.setTime(a.getTime()),s=i+o,d=loopCalc(i);if("typing"===e.state)for(;[s-o]>0;)o=new Date,o=o.setTime(o.getTime()),apiLeadbet.ChatStates.sendChatStateComposing(n),await sleep(d);else if("recording"===e.state)for(;[s-o]>0;)o=new Date,o=o.setTime(o.getTime()),apiLeadbet.ChatStates.sendChatStateRecording(n),await sleep(d)}async function handleScript(e,t){let n=t.id,a=e?.chatIcon||null;if(!e?.chatIcon){a=(await apiLeadbet.ProfilePicThumb.getModelsArray().find((e=>e.id._serialized===t.id._serialized))).img||null}let i={...e,sendTo:t.id,chatIcon:a,chatName:getChatName(t)};if(e?.addLabel&&e.addLabel.length>0)try{e.addLabel.forEach((e=>{let t=n;var{id:a}=apiLeadbet.Label._models.find((t=>t.id==e||t.name==e)),i=apiLeadbet.Chat.get(t)||apiLeadbet.Msg.get(t)||apiLeadbet.Contact.get(t);apiLeadbet.Label.addOrRemoveLabels([{id:a,type:"add"}],[i])}))}catch(e){console.log("error adding tags",e)}if(e?.removeLabel&&e.removeLabel.length>0)try{e.removeLabel.forEach((e=>{let t=n;var{id:a}=apiLeadbet.Label._models.find((t=>t.id==e||t.name==e)),i=apiLeadbet.Chat.get(t)||apiLeadbet.Msg.get(t)||apiLeadbet.Contact.get(t);apiLeadbet.Label.addOrRemoveLabels([{id:a,type:"remove"}],[i])}))}catch(e){console.log("error removing tags",e)}window.dispatchEvent(new CustomEvent("SCRIPT_RETURN",{detail:i}))}function handleLabeling(e){}function sendTextMessage(e,t){e&&""!=e&&t&&apiLeadbet.sendTextMsgToChat(t,String(e),{quotedMsg:t.composeQuotedMsg})}async function sendMediaMessage(e,t,n=""){let[a,i]=e.split(","),o=a.match(/:(.*?);/)[1],s=window.Base64?window.Base64.atob(i):atob(i);for(var d=s.length,r=new Uint8Array(d);d--;)r[d]=s.charCodeAt(d);let l=new File([r],"name",{type:o});const c=await apiLeadbet.OpaqueData.createFromData(l,l.type),u=apiLeadbet.MediaPrep.prepRawMedia(c,{isPtt:!1,precomputedFields:!1});await u.waitForPrep(),u.sendToChat(t,{quotedMsg:t.composeQuotedMsg,caption:n})}async function sendAudioMessage(e,t){const n=e.data;if(e.fowardedMode)return void sendDocMessage(n,t,null);let[a,i]=n.split("@@"),[o,s]=i.split(","),d=o.match(/:(.*?);/)[1],r=window.Base64?window.Base64.atob(s):atob(s),l=r.length,c=new Uint8Array(l);for(;l--;)c[l]=r.charCodeAt(l);let u=new File([c],"audio",{type:d});const p=await apiLeadbet.OpaqueData.createFromData(u,u.type),f={isPtt:!0,precomputedFields:await ComputedFields(u)},g=apiLeadbet.MediaPrep.prepRawMedia(p,f);await g.waitForPrep(),g.sendToChat(t,{quotedMsg:t.composeQuotedMsg})}async function sendDocMessage(e,t,n){let[a,i]=e.split(","),o=a.match(/:(.*?);/)[1],s=window.Base64?window.Base64.atob(i):atob(i);for(var d=s.length,r=new Uint8Array(d);d--;)r[d]=s.charCodeAt(d);let l=new File([r],n,{type:o});const c=await apiLeadbet.OpaqueData.createFromData(l,l.type),u=apiLeadbet.MediaPrep.prepRawMedia(c,{isPtt:!1,precomputedFields:!1});await u.waitForPrep(),u.sendToChat(t,{quotedMsg:t.composeQuotedMsg})}async function ComputedFields(e){try{const t=await e.arrayBuffer(),n=await(new AudioContext).decodeAudioData(t),a=n.getChannelData(0),i=64,o=Math.floor(a.length/i),s=[];for(let e=0;e<i;e++){const t=o*e;let n=0;for(let e=0;e<o;e++)n+=Math.abs(a[t+e]);s.push(n/o)}const d=Math.pow(Math.max(...s),-1),r=s.map((e=>e*d)),l=new Uint8Array(r.map((e=>Math.floor(100*e))));return{duration:Math.floor(n.duration),waveform:l}}catch(e){console.log("Erro - Ondas do Audio",e)}}async function getLabels(){try{labelList={labelArray:apiLeadbet.Label._models}}catch(e){labelList={}}window.dispatchEvent(new CustomEvent("LABELS",{detail:JSON.stringify(labelList)}))}function getOpenChat(){const e=apiLeadbet.Chat._models.filter((e=>e.active))[0];e&&processName(e,!0)}async function getOpenChatForEvent(e){let t;if(e.sendTo){let n=e.sendTo;t=apiLeadbet.Chat._models.filter((e=>e.__x_id.user==n.user))[0]}else t=apiLeadbet.Chat._models.filter((e=>e.active))[0];if(t)return t;window.dispatchEvent(new CustomEvent("API_MOUNTED",{detail:"NO_OPEN_WINDOW"}))}async function handleTrigger(e){if("ciphertext"===e?.type&&e.once("change:type",(()=>{handleTrigger(e)})),"chat"===e?.type&&e?.isNewMsg&&!e?.id?.fromMe){const t=e?.body;if(!t)return;const n=await decideIfTriggerMatches(triggerList,removeAccentsAndSpecialChars(t));if(!n.toSend)return;const a=getWppChatById(e?.id?.remote.toString()),i=a.contact.isAddressBookContact;if(n.noSavedContact&&i)return;const o=a.isGroup;if(n.noGroups&&o)return;const s=getChatName(a);let d=null;d=(await apiLeadbet.ProfilePicThumb.getModelsArray().find((e=>e.id._serialized===a.id._serialized))).img||null;const r={typeOfMessage:"trigger",sendTo:e?.id?.remote,scriptId:n.idScript,waitBeforeSend:n.waitBeforeSend,chatName:s,chatIcon:d};window.dispatchEvent(new CustomEvent("TRIGGER_STARTED",{detail:r}))}}async function decideIfTriggerMatches(e,t){for(let n of e){if(!n.isActive)continue;let e=[];for(let a of n.triggerRules){let i=n.noCaseSensitive?t.toLowerCase():t,o=a.keywords.map((e=>removeAccentsAndSpecialChars(n.noCaseSensitive?e.toLowerCase():e)));switch(a.rule){case"equals":e.push(o.some((e=>i===e)));break;case"contains":e.push(o.some((e=>new RegExp(`\\b${e}\\b`,"i").test(i))));break;case"startsWith":e.push(o.some((e=>i.startsWith(e))));break;case"notContains":e.push(o.every((e=>!i.includes(e))));break;case"endsWith":e.push(o.some((e=>i.endsWith(e))));break;default:throw new Error(`Unsupported rule type: ${a.type}`)}}if(e.every((e=>e)))return{toSend:!0,idScript:n.scriptId,waitBeforeSend:n.waitBeforeSend,noGroups:n.noGroups,noSavedContact:n.noSavedContact}}return{toSend:!1,idScript:null}}function getWppChatById(e){return apiLeadbet.Chat.getModelsArray().find((t=>t.id.toString()===e))}async function processName(e,t=!1){let n=null;null==n&&(n=e.contact.__x_pushname,null==n&&(n=e.contact.__x_name)),0==t?window.dispatchEvent(new CustomEvent("LeadbetEventGot",{detail:n})):1==t&&window.dispatchEvent(new CustomEvent("OpenChatName",{detail:n}))}function sleep(e){return new Promise((t=>setTimeout(t,e)))}function loopCalc(e){return e<15e3?2500:15e3<=e<=3e4?5e3:e>3e4?1e4:void 0}function getChatName(e){let t="";return t=e.contact.isGroup||e.contact.isBroadcast||e.contact.isMyContact?e.contact.name:e.contact.notifyName,null==t&&(t=e.contact.__x_pushname,null==t&&(t=e.contact.__x_name)),t}function removeAccentsAndSpecialChars(e){return e.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}window.addEventListener("LeadbetEvent",(async e=>{let t=e.detail;"startTriggers"===t.typeOfMessage&&wppTriggersMessageListeners(t),"updateTriggers"===t.typeOfMessage&&wppTriggersMessageListeners(t);let n=await getOpenChatForEvent(t);if(n)switch(t.typeOfMessage){case"checkAPI":handleCheckAPI();break;case"sendState":await handleSendState(t,n);break;case"script":await handleScript(t,n);break;case"text":sendTextMessage(t.data,n);break;case"audio":sendAudioMessage(t,n,t.wave);break;case"midia":sendMediaMessage(t.data,n,t.caption);break;case"doc":sendDocMessage(t.data,n,t.name);break;case"label":handleLabeling(t,n)}}));const requiredModules=[{id:"Store",conditions:e=>e.default&&e.default.Chat&&e.default.Msg?e.default:null},{id:"MediaCollection",conditions:e=>e.default&&e.default.prototype&&void 0!==e.default.prototype.processAttachments?e.default:null},{id:"MediaProcess",conditions:e=>e.BLOB?e:null},{id:"MediaPrep",conditions:e=>e.uploadProductImage&&e.MediaPrep?e:null},{id:"OpaqueData",conditions:e=>e.default&&e.default.createFromData?e:null,properties:e=>e.default},{id:"ChatUtil",conditions:e=>e.sendClear&&e.clearChat?e:null},{id:"GroupInvite",conditions:e=>e.sendQueryGroupInviteCode?e:null},{id:"Wap",conditions:e=>e.createGroup?e:null},{id:"ServiceWorker",conditions:e=>e.default&&e.default.killServiceWorker?e:null},{id:"State",conditions:e=>e.STATE&&e.STREAM?e:null},{id:"WapDelete",conditions:e=>e.sendConversationDelete&&2===e.sendConversationDelete.length?e:null},{id:"Conn",conditions:e=>e.default&&e.Conn||e.Conn&&e.ConnImpl?e.default:null},{id:"Clock",conditions:e=>e.Clock.globalUnixTime||e.default.globalUnixTime?e:null},{id:"Constants",conditions:e=>0===e.ACK.CLOCK?e:null},{id:"WapQuery",conditions:e=>e.default&&e.default.queryExist&&e.default.getCapabilities?e.default:null},{id:"CryptoLib",conditions:e=>e.decryptE2EMedia?e:null},{id:"OpenChat",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.openChat?e.default:null},{id:"UserConstructor",conditions:e=>e.default&&e.default.prototype&&e.default.prototype.isServer&&e.default.prototype.isUser?e.default:null},{id:"sendTextMsgToChat",conditions:e=>e.sendTextMsgToChat?e.sendTextMsgToChat:null},{id:"SendSeen",conditions:e=>e.sendSeen?e.sendSeen:null},{id:"Archive",conditions:e=>e.setArchive?e:null},{id:"pinChat",conditions:e=>e.setPin.toString().includes(".unproxy")?e:null},{id:"sendDelete",conditions:e=>e.sendDelete?e.sendDelete:null},{id:"addAndSendMsgToChat",conditions:e=>e.addAndSendMsgToChat?e.addAndSendMsgToChat:null},{id:"sendMsgToChat",conditions:e=>e.sendMsgToChat?e.sendMsgToChat:null},{id:"Catalog",conditions:e=>e.Catalog?e.Catalog:null},{id:"Perfil",conditions:e=>!0===e.__esModule&&e.setPushname&&!e.getComposeContents?e:null},{id:"MsgHandler",conditions:e=>e.default&&"function"==typeof e.default.toString&&e.default.toString().includes("Msg:out of order ack")?e:null},{id:"MsgKey",conditions:e=>e.default&&"function"==typeof e.default.toString&&e.default.toString().includes("MsgKey error: obj is null/undefined")?e.default:null},{id:"Parser",conditions:e=>e.convertToTextWithoutSpecialEmojis?e.default:null},{id:"Builders",conditions:e=>e.TemplateMessage&&e.HydratedFourRowTemplate?e:null},{id:"Me",conditions:e=>e.PLATFORMS&&e.Conn?e.default:null},{id:"CallUtils",conditions:e=>e.sendCallEnd&&e.parseCall?e:null},{id:"Identity",conditions:e=>e.queryIdentity&&e.updateIdentity?e:null},{id:"MyStatus",conditions:e=>e.getStatus&&e.setMyStatus?e:null},{id:"ChatStates",conditions:e=>e.sendChatStatePaused&&e.sendChatStateRecording&&e.sendChatStateComposing?e:null},{id:"ChatPresence",conditions:e=>e.markComposing&&e.markPaused&&e.markRecording?e:null},{id:"GroupActions",conditions:e=>e.sendExitGroup&&e.localExitGroup?e:null},{id:"Features",conditions:e=>e.FEATURE_CHANGE_EVENT&&e.features?e:null},{id:"MessageUtils",conditions:e=>e.storeMessages&&e.appendMessage?e:null},{id:"WebMessageInfo",conditions:e=>e.WebMessageInfo&&e.WebFeatures?e.WebMessageInfo:null},{id:"createMessageKey",conditions:e=>e.createMessageKey&&e.createDeviceSentMessage?e.createMessageKey:null},{id:"Participants",conditions:e=>e.addParticipants&&e.removeParticipants&&e.promoteParticipants&&e.demoteParticipants?e:null},{id:"WidFactory",conditions:e=>e.isWidlike&&e.createWid&&e.createWidFromWidLike?e:null},{id:"Base",conditions:e=>e.setSubProtocol&&e.binSend&&e.actionNode?e:null},{id:"Base2",conditions:e=>e.supportsFeatureFlags&&e.parseMsgStubProto&&e.binSend&&e.subscribeLiveLocation?e:null},{id:"Versions",conditions:e=>e.loadProtoVersions&&e.default[15]&&e.default[16]&&e.default[17]?e:null},{id:"Sticker",conditions:e=>e.StickerCollection&&e.default?e:null},{id:"MediaObject",conditions:e=>e.getOrCreateMediaObject&&e.disassociateMediaFromStickerPack?e:null},{id:"MediaUpload",conditions:e=>e.default&&e.default.mediaUpload?e.default:null},{id:"UploadUtils",conditions:e=>e.default&&e.default.encryptAndUpload?e.default:null},{id:"Cmd",conditions:e=>e.default&&e.default.openChatFromUnread?e:null},{id:"ReadSeen",conditions:e=>e.sendSeen?e:null},{id:"Block",conditions:e=>e.blockContact&&e.unblockContact?e:null},{id:"BlockList",conditions:e=>e.BlocklistCollection?e:null},{id:"Theme",conditions:e=>e.getTheme&&e.setTheme?e:null},{id:"Vcard",conditions:e=>e.vcardFromContactModel?e:null},{id:"Profile",conditions:e=>e.sendSetPicture&&e.requestDeletePicture?e:null},{id:"SendMute",conditions:e=>e.sendConversationMute?e:null},{id:"Validators",conditions:e=>e.findLinks?e:null},{id:"Wap2",conditions:e=>e.Wap?e:null},{id:"LinkPreview",conditions:e=>e.findFirstWebLink?e:null},{id:"fetchLinkPreview",conditions:(e,t)=>{if(e.getLinkPreview&&!e.getAck)return!0;const n=moduleSource(t);return n.includes(".genMinimalLinkPreview")&&n.includes(".getProductOrCatalogLinkPreview")},properties:e=>e.getLinkPreview||e.default},{id:"genId",conditions:e=>e.default&&"function"==typeof e.default&&"function"==typeof e.default.toString&&e.default.toString().match(/crypto/)?e:null},{id:"GroupMetadata",conditions:e=>e.default&&e.default.handlePendingInvite?e:null},{id:"i10n",conditions:e=>e.default&&e.default.downloadAppLocale?e.default:null},{id:"NetworkStatus",conditions:e=>e.default&&e.default._logOnlineOffline?e.default:null},{id:"Stream",conditions:e=>e.default&&e.default.unobscure?e.default:null},{id:"ws2",conditions:e=>e.default&&e.default.destroyStorage?e.default:null},{id:"BlobCache",conditions:e=>e.default&&e.default.getOrCreateURL?e.default:null},{id:"UserPrefs",conditions:e=>e.getMaybeMeUser?e:null},{id:"randomMessageId",conditions:e=>e.randomId||e.default.randomId?e:null},{id:"sendSetGroupSubject",conditions:e=>e.sendSetGroupSubject},{id:"sendSetGroupProperty",conditions:e=>e.sendSetGroupProperty},{id:"sendSetGroupDescription",conditions:e=>e.sendSetGroupDescription},{id:"changeEphemeralDuration",conditions:e=>e.changeEphemeralDuration},{id:"sendCallSignalingMsg",conditions:e=>e.sendCallSignalingMsg},{id:"sendQueryExists",conditions:e=>e.queryExists&&e.queryPhoneExists||e.queryWidExists&&e.queryPhoneExists,properties:e=>e.queryExists||e.queryWidExists},{id:"findChat",conditions:e=>e.findChat?e.findChat:null},{id:"sendCreateGroup",conditions:e=>e.sendCreateGroup},{id:"msgFindQuery",conditions:e=>e.msgFindQuery&&e.msgFindByIds||e.msgFindQuery&&e.getMsgsByMsgKey?e.msgFindQuery:null}];